function FormValidator(t){this.form=t,this.errors=[],this.validators=[],$(this.form).on("submit",$.proxy(this,"onSubmit")),this.summary=$(".error-summary"),this.summary.on("click","a",$.proxy(this,"onErrorClick")),this.originalTitle=document.title}FormValidator.entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},FormValidator.escapeHtml=function(t){return String(t).replace(/[&<>"'`=\/]/g,function(t){return FormValidator.entityMap[t]})},FormValidator.prototype.onErrorClick=function(t){t.preventDefault();var i=t.target.href,o=i.substring(i.indexOf("#"),i.length);$(o).focus()},FormValidator.prototype.resetTitle=function(){document.title=this.originalTitle},FormValidator.prototype.updateTitle=function(){var t=1<this.errors.length?" errors":" error";document.title=this.errors.length+t+" - "+document.title},FormValidator.prototype.showSummary=function(){this.summary.html(this.getSummaryHtml()),this.summary.removeClass("hidden"),this.summary.focus()},FormValidator.prototype.getSummaryHtml=function(){var t='<h2 class="error-summary__title">There is a problem</h2>';t+='<div class="error-summary__body">',t+='<ul class="list error-summary__list">';for(var i=0,o=this.errors.length;i<o;i++){var e=this.errors[i];t+='<li class="list error-summary__list-item">',t+='<a class="error-summary__link" href="#'+FormValidator.escapeHtml(e.fieldName)+'">',t+=FormValidator.escapeHtml(e.message),t+="</a>",t+="</li>"}return t+="</ul>",t+="</div>"},FormValidator.prototype.hideSummary=function(){this.summary.addClass("hidden")},FormValidator.prototype.onSubmit=function(t){this.removeInlineErrors(),this.hideSummary(),this.resetTitle(),this.validate()||(t.preventDefault(),this.updateTitle(),this.showSummary(),this.showInlineErrors())},FormValidator.prototype.showInlineErrors=function(){for(var t=0,i=this.errors.length;t<i;t++)this.showInlineError(this.errors[t])},FormValidator.prototype.showInlineError=function(t){var i=t.fieldName+"-error",o='<span class="error-message" id="'+i+'">'+FormValidator.escapeHtml(t.message)+"</span>",e=$("#"+t.fieldName),r=e.parents(".form-group"),a=r.find("label"),n=r.find("legend");r.find(".error-message").remove(),r.addClass("form-group--error"),n.length?(n.append(o),r.attr("aria-invalid","true")):(a.after(o),e.attr("aria-invalid","true"),"textarea"===e[0].nodeName.toLowerCase()?e.addClass("textarea--error"):e.addClass("input--error"),e.attr("aria-describedby",i))},FormValidator.prototype.removeInlineErrors=function(){$(this.form).find(".error-message").remove(),$(this.form).find(".form-group--error").removeClass("form-group--error"),$(this.form).find(".input--error").removeClass("input--error"),$(this.form).find(".textarea--error").removeClass("textarea--error"),$(this.form).find("[aria-invalid]").attr("aria-invalid","false"),$(this.form).find("[aria-describedby]").removeAttr("aria-describedby")},FormValidator.prototype.addValidator=function(t,i){this.validators.push({fieldName:t,rules:i,field:this.form.elements[t]})},FormValidator.prototype.validate=function(){this.errors=[];var t,i,o=null;for(t=0;t<this.validators.length;t++)for(o=this.validators[t],i=0;i<o.rules.length;i++)if(!o.rules[i].method(o.field,o.rules[i].params)){this.errors.push({fieldName:o.fieldName,message:o.rules[i].message});break}return 0===this.errors.length};var Toggle=function(t){this.container=t,this.mq="(min-width: 46.24em)",this.keys={esc:27,tab:9},this.navigation=t.find(".navigation"),this.createToggleButton(),this.firstNavigationItem=this.navigation.find(".navigation__link").first(),this.lastNavigationItem=this.navigation.find(".navigation__link").last(),this.setupResponsiveChecks()};Toggle.prototype.setupResponsiveChecks=function(){this.mql=window.matchMedia(this.mq),this.mql.addListener($.proxy(this,"checkMode")),this.checkMode(this.mql)},Toggle.prototype.checkMode=function(t){t.matches?this.enableBigMode():this.enableSmallMode()},Toggle.prototype.enableSmallMode=function(){this.hideNavigation(),this.firstNavigationItem.on("keydown",$.proxy(this,"onNavigationLinkFirstKeyDown")),this.lastNavigationItem.on("keydown",$.proxy(this,"onNavigationLinkLastKeyDown")),this.navigation.on("keydown",".navigation__link",$.proxy(this,"onNavigationLinkKeyDown"))},Toggle.prototype.enableBigMode=function(){this.showNavigation(),this.firstNavigationItem.off("keydown",$.proxy(this,"onNavigationLinkFirstKeyDown")),this.lastNavigationItem.off("keydown",$.proxy(this,"onNavigationLinkLastKeyDown")),this.navigation.off("keydown",".navigation__link",$.proxy(this,"onNavigationLinkKeyDown"))},Toggle.prototype.onNavigationLinkKeyDown=function(t){t.keyCode===this.keys.esc&&this.hideNavigation()},Toggle.prototype.onNavigationLinkFirstKeyDown=function(t){t.keyCode===this.keys.tab&&t.shiftKey&&(t.preventDefault(),this.lastNavigationItem.focus())},Toggle.prototype.onNavigationLinkLastKeyDown=function(t){t.keyCode!==this.keys.tab||t.shiftKey||(t.preventDefault(),this.firstNavigationItem.focus())},Toggle.prototype.createToggleButton=function(){this.toggleButton=$('<button class="toggle" aria-expanded="false" aria-controls="nav"><span class="visually-hidden">Show </span>menu</button>'),this.container.prepend(this.toggleButton),this.toggleButton.on("click",$.proxy(this,"onButtonToggleClick"))},Toggle.prototype.showNavigation=function(){this.navigation.removeClass("hidden"),this.toggleButton.attr("aria-expanded","true"),this.toggleButton.find("span").text("Hide ")},Toggle.prototype.hideNavigation=function(){this.navigation.addClass("hidden"),this.toggleButton.attr("aria-expanded","false"),this.toggleButton.find("span").text("Show ")},Toggle.prototype.toggle=function(){"false"===this.toggleButton.attr("aria-expanded")?this.showNavigation():this.hideNavigation()},Toggle.prototype.onButtonToggleClick=function(){this.toggle()};